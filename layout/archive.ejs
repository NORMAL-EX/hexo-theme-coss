<div class="py-8">
  <div class="mx-auto w-full max-w-6xl px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <%# Main Content %>
      <div class="flex-1 min-w-0">
        <article class="relative flex flex-col gap-6 rounded-2xl border bg-card bg-clip-padding text-card-foreground shadow-xs before:pointer-events-none before:absolute before:inset-0 before:rounded-[calc(var(--radius-2xl)-1px)] before:shadow-[0_1px_--theme(--color-black/4%)] dark:bg-clip-border dark:before:shadow-[0_-1px_--theme(--color-white/8%)] overflow-hidden">
          <div class="p-6 lg:p-8">
            <%# Page Title - 靠左对齐 %>
            <h1 class="text-3xl font-bold mb-2 text-left">归档</h1>
            <p class="text-muted-foreground mb-8 text-left">共 <%= site.posts.length %> 篇文章</p>

            <%# Archive List by Year %>
            <%
            var posts = page.posts.sort('-date');
            var yearGroups = {};
            posts.each(function(post) {
              var year = post.date.year();
              if (!yearGroups[year]) {
                yearGroups[year] = [];
              }
              yearGroups[year].push(post);
            });
            var years = Object.keys(yearGroups).sort(function(a, b) { return b - a; });
            %>

            <% years.forEach(function(year) { %>
            <div class="mb-8">
              <h2 class="text-xl font-semibold mb-4 flex items-center gap-2 text-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M8 2v4"></path>
                  <path d="M16 2v4"></path>
                  <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                  <path d="M3 10h18"></path>
                </svg>
                <%= year %>
                <span class="text-sm font-normal text-muted-foreground">(<%= yearGroups[year].length %>)</span>
              </h2>

              <div class="space-y-4 border-l-2 border-muted pl-6 ml-2">
                <% yearGroups[year].forEach(function(post) { %>
                <div class="relative">
                  <div class="absolute -left-[29px] top-1.5 w-3 h-3 rounded-full bg-muted-foreground"></div>
                  <div class="flex flex-col sm:flex-row sm:items-center gap-2">
                    <time class="text-sm text-muted-foreground shrink-0" datetime="<%= date_xml(post.date) %>">
                      <%= date(post.date, 'MM-DD') %>
                    </time>
                    <a href="<%= url_for(post.path) %>" class="font-medium hover:text-primary transition-colors hover:underline underline-offset-4">
                      <%= post.title %>
                    </a>
                  </div>
                </div>
                <% }); %>
              </div>
            </div>
            <% }); %>

            <%# Pagination %>
            <%- partial('_partial/pagination') %>
          </div>
        </article>
      </div>

      <%# Sidebar - only show if there's content %>
      <%
        var showAuthor = !theme.sidebar || theme.sidebar.showAuthor !== false;
        var showCategories = (!theme.sidebar || theme.sidebar.showCategories !== false) && site.categories.length > 0;
        var showTags = (!theme.sidebar || theme.sidebar.showTags !== false) && site.tags.length > 0;
        var showRecent = !theme.sidebar || theme.sidebar.showRecent !== false;
        var hasSidebarContent = showAuthor || showCategories || showTags || showRecent;
      %>
      <% if (hasSidebarContent) { %>
      <div class="w-full lg:w-80 shrink-0">
        <%- partial('_partial/sidebar') %>
      </div>
      <% } %>
    </div>
  </div>
</div>
